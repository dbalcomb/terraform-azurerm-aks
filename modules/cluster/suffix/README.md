# Cluster Suffix

This module generates the suffix used by Azure Kubernetes Service (AKS) cluster
resources that are provisioned by Azure. By using this module it is possible to
use the suffix for resources provisioned by Terraform before the cluster has
been created.

## Notes

- The suffix is generated by the [aks-engine](https://github.com/Azure/aks-engine)
  project which is used internally by the Azure Kubernetes Service resource in
  Microsoft Azure.
- The suffix is calculated from the domain name prefix given to the cluster and
  will produce the same output from the given input as long as the algorithm
  does not change.
- This module uses a serverless function endpoint deployed via Cloudflare
  workers that emulates the algorithm that generates the suffix. This proved to
  be the simplest way to provide the functionality without requiring external
  dependencies to be installed and managed locally.

## References

- [Implementation](https://github.com/Azure/aks-engine/blob/fa0c6c8480fedeee4e663a98ccf737448dbabd58/pkg/api/types.go#L1132)
